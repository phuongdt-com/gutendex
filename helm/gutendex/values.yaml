# Default values for gutendex (SQLite version with daily sync)
# This is a YAML-formatted file.

# -- Number of replicas (keep at 1 for SQLite)
replicaCount: 1

image:
  # -- Image repository
  repository: gutendex
  # -- Image pull policy
  pullPolicy: IfNotPresent
  # -- Image tag (defaults to Chart appVersion)
  tag: ""

# -- Image pull secrets
imagePullSecrets: []
# -- Override chart name
nameOverride: ""
# -- Override full name
fullnameOverride: ""

serviceAccount:
  # -- Create service account
  create: true
  # -- Annotations for service account
  annotations: {}
  # -- Service account name
  name: ""

# -- Pod annotations
podAnnotations: {}

# -- Pod security context
podSecurityContext:
  fsGroup: 1000

# -- Container security context
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  readOnlyRootFilesystem: false
  allowPrivilegeEscalation: false

service:
  # -- Service type
  type: ClusterIP
  # -- Service port
  port: 80
  # -- Target port
  targetPort: 8000

ingress:
  # -- Enable ingress
  enabled: false
  # -- Ingress class name
  className: "nginx"
  # -- Ingress annotations
  annotations: {}
    # kubernetes.io/tls-acme: "true"
  # -- Ingress hosts configuration
  hosts:
    - host: gutendex.local
      paths:
        - path: /
          pathType: Prefix
  # -- Ingress TLS configuration
  tls: []
  #  - secretName: gutendex-tls
  #    hosts:
  #      - gutendex.local

resources:
  # -- Resource limits
  limits:
    cpu: 500m
    memory: 512Mi
  # -- Resource requests
  requests:
    cpu: 100m
    memory: 256Mi

# -- Node selector
nodeSelector: {}

# -- Tolerations
tolerations: []

# -- Affinity rules
affinity: {}

# Django application configuration
django:
  # -- Django secret key (generate a secure random string for production)
  secretKey: "change-me-to-a-secure-random-string"
  # -- Debug mode (set to false in production)
  debug: false
  # -- Allowed hosts (comma-separated)
  allowedHosts: "*"
  # -- Number of gunicorn workers
  workers: 4

# Persistence configuration for database and static files
persistence:
  # -- Enable persistence (required for catalog updates to persist)
  enabled: true
  # -- Storage class (leave empty for default)
  storageClass: ""
  # -- Access mode
  accessMode: ReadWriteOnce
  # -- Storage size (needs space for SQLite DB + catalog files)
  size: 10Gi

# Catalog update CronJob configuration
catalogUpdate:
  # -- Enable daily catalog update from Project Gutenberg
  enabled: true
  # -- Cron schedule (default: daily at 2am UTC)
  schedule: "0 2 * * *"
  # -- CronJob concurrency policy
  concurrencyPolicy: Forbid
  # -- Failed jobs history limit
  failedJobsHistoryLimit: 3
  # -- Successful jobs history limit
  successfulJobsHistoryLimit: 3
  # -- Job restart policy
  restartPolicy: OnFailure
  # -- Resources for the update job
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 200m
      memory: 512Mi

# Liveness probe configuration
livenessProbe:
  # -- Enable liveness probe
  enabled: true
  # -- Initial delay seconds
  initialDelaySeconds: 10
  # -- Period seconds
  periodSeconds: 10
  # -- Timeout seconds
  timeoutSeconds: 5
  # -- Failure threshold
  failureThreshold: 6
  # -- Success threshold
  successThreshold: 1

# Readiness probe configuration
readinessProbe:
  # -- Enable readiness probe
  enabled: true
  # -- Initial delay seconds
  initialDelaySeconds: 5
  # -- Period seconds
  periodSeconds: 10
  # -- Timeout seconds
  timeoutSeconds: 5
  # -- Failure threshold
  failureThreshold: 6
  # -- Success threshold
  successThreshold: 1
