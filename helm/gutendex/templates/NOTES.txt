ğŸ‰ Gutendex has been deployed successfully!

{{- if .Values.persistence.enabled }}
ğŸ“¦ Persistence: ENABLED
   - Database and catalog files are stored persistently
   - Data survives pod restarts
{{- else }}
âš ï¸  Persistence: DISABLED
   - Data will be lost when pod restarts
   - Enable persistence for production use
{{- end }}

{{- if .Values.catalogUpdate.enabled }}
ğŸ“… Catalog Update: ENABLED
   - Schedule: {{ .Values.catalogUpdate.schedule }} (cron format)
   - The catalog will sync daily with Project Gutenberg
   
   To manually trigger a catalog update:
   kubectl create job --from=cronjob/{{ include "gutendex.fullname" . }}-catalog-update manual-update-$(date +%s) -n {{ .Release.Namespace }}
   
   To check update job status:
   kubectl get jobs -n {{ .Release.Namespace }} | grep catalog-update
{{- else }}
ğŸ“… Catalog Update: DISABLED
   - Enable with: catalogUpdate.enabled=true
{{- end }}

{{- if .Values.ingress.enabled }}

ğŸŒ Access your Gutendex API at:
{{- range $host := .Values.ingress.hosts }}
  {{- range .paths }}
  http{{ if $.Values.ingress.tls }}s{{ end }}://{{ $host.host }}{{ .path }}
  {{- end }}
{{- end }}

{{- else if contains "NodePort" .Values.service.type }}

ğŸŒ Get the application URL by running:
  export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "gutendex.fullname" . }})
  export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT

{{- else if contains "LoadBalancer" .Values.service.type }}

ğŸŒ Get the application URL by running:
  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
  kubectl get --namespace {{ .Release.Namespace }} svc -w {{ include "gutendex.fullname" . }}

{{- else if contains "ClusterIP" .Values.service.type }}

ğŸŒ Get the application URL by running:
  export POD_NAME=$(kubectl get pods --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "gutendex.name" . }},app.kubernetes.io/instance={{ .Release.Name }}" -o jsonpath="{.items[0].metadata.name}")
  echo "Visit http://127.0.0.1:8080 to use your application"
  kubectl --namespace {{ .Release.Namespace }} port-forward $POD_NAME 8080:8000

{{- end }}

ğŸ“š API Endpoints:
  - Home page: /
  - Books list: /books
  - Book detail: /books/<id>
  - Search: /books?search=dickens

âš™ï¸ Configuration:
  - Debug mode: {{ .Values.django.debug }}
  - Database: SQLite (persistent storage)
  - Replicas: {{ .Values.replicaCount }}

ğŸ“ First Startup Note:
   On first deployment, the init container will:
   1. Run database migrations
   2. Download and populate the catalog (~70,000 books)
   3. Collect static files
   This may take 5-10 minutes. Check progress with:
   kubectl logs -f deployment/{{ include "gutendex.fullname" . }} -c init-database -n {{ .Release.Namespace }}

For more information, visit: https://gutendex.com
